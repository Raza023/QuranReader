<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Quran Reader</title>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Lateef&family=Amiri&family=Scheherazade+New&family=Noto+Naskh+Arabic&display=swap" rel="stylesheet">

	<style>
		:root {
			--bg-light: #f9f9f9;
			--bg-dark: #121212;
			--text-light: #121212;
			--text-dark: #f9f9f9;
			--accent: #3b82f6;
			--card-bg-light: #ffffff;
			--card-bg-dark: #1f1f1f;
			--arabic-font: 'Scheherazade New', serif;
		}
		body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-light); color: var(--text-light); transition: background-color 0.3s, color 0.3s; line-height: 1.6; }
		body.dark { background-color: var(--bg-dark); color: var(--text-dark); }
		header { background-color: var(--accent); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); position: relative; flex-wrap: wrap; gap: 0.5rem; }
		.header-title { font-weight: bold; }
		.bismillah { position: absolute; left: 50%; transform: translateX(-50%); font-family: var(--arabic-font); font-size: 1.6rem; white-space: nowrap; }
		.buttons { display: flex; gap: 0.5rem; align-items: center; }
		select { padding: 4px 6px; border-radius: 5px; border: 1px solid #ccc; font-size: 0.9rem; }
		.container { display: flex; flex-direction: column; padding: 1.5rem; max-width: 1200px; margin: 0 auto; }
		.surah-list, .surah-content { margin-top: 1.5rem; }
		.surah-item { padding: 1rem; border: 1px solid #ddd; border-radius: 10px; background-color: var(--card-bg-light); margin-bottom: 0.75rem; cursor: pointer; transition: all 0.3s ease; }
		body.dark .surah-item { background-color: var(--card-bg-dark); border-color: #333; }
		.surah-item:hover { background-color: #e0e7ff; }
		.verse { margin: 1.5rem 0; text-align: right; direction: rtl; background: var(--card-bg-light); padding: 1rem; border-radius: 10px; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); }
		body.dark .verse { background: var(--card-bg-dark); }
		.translation { font-size: 1rem; color: #444; text-align: right; direction: rtl; margin-top: 0.5rem; font-family: 'Noto Nastaliq Urdu', 'Jameel Noori Nastaleeq', serif; }
		body.dark .translation { color: #ccc; }
		.hashiyah { font-size: 0.9rem; color: #666; text-align: right; direction: rtl; margin-top: 0.4rem; font-style: italic; }
		body.dark .hashiyah { color: #aaa; }
		.toggle-theme, .text-resize { cursor: pointer; font-weight: bold; border: none; background: none; color: white; font-size: 1.4rem; }
		.font-select { padding: 4px 6px; border-radius: 5px; border: none; font-size: 0.9rem; }
		.wbw { margin-top: 0.5rem; display: flex; flex-wrap: wrap; gap: 5px; justify-content: flex-end; direction: rtl; }
		.wbw span { background: rgba(59, 130, 246, 0.1); padding: 3px 6px; border-radius: 6px; text-align: center; }
		body.dark .wbw span { background: rgba(59, 130, 246, 0.2); }
		@media (min-width: 768px) {
			.container { flex-direction: row; }
			.surah-list { flex: 1; max-width: 320px; margin-right: 2rem; }
			.surah-content { flex: 3; }
		}
	</style>
</head>

<body class="dark">
	<header>
		<div class="header-title">Quran Reader</div>
		<div class="bismillah">ÿ®Ÿêÿ≥€°ŸÖŸê ÿßŸÑŸÑŸëŸ∞€ÅŸê ÿßŸÑÿ±ŸëŸéÿ≠€°ŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸëŸéÿ≠Ÿê€å€°ŸÖŸê</div>
		<div class="buttons">
			<select id="surahSelect"></select>
			<select id="verseSelect"></select>
			<select class="font-select" onchange="changeArabicFont(this.value)">
				<option value="'Lateef', serif">Font 1</option>
				<option value="'Amiri', serif">Font 2</option>
				<option value="'Scheherazade New', serif" selected>Font 3</option>
				<option value="'Noto Naskh Arabic', serif">Font 4</option>
			</select>
			<button class="text-resize" onclick="changeFontSize(1)">A+</button>
			<button class="text-resize" onclick="changeFontSize(-1)">A-</button>
			<button class="toggle-theme" onclick="toggleTheme()">üåì</button>
		</div>
	</header>

	<div class="container">
		<div class="surah-list" id="surahList">Loading...</div>
		<div class="surah-content" id="surahContent">Select a Surah to view</div>
	</div>

	<!-- Local data scripts -->
	<script src="Quran.js"></script>
	<script src="wbw-urdu.js"></script>

	<script>
		let arabicFontSize = 1.4, urduFontSize = 1.0, wbwArabicFontSize = 1.2, wbwUrduFontSize = 0.9;
		let arabicFont = "'Scheherazade New', serif";

		const surahList = document.getElementById('surahList');
		const surahContent = document.getElementById('surahContent');
		const surahSelect = document.getElementById('surahSelect');
		const verseSelect = document.getElementById('verseSelect');

		function toggleTheme() { document.body.classList.toggle('dark'); }
		function changeFontSize(delta) {
			arabicFontSize += 0.1 * delta; urduFontSize += 0.1 * delta; wbwArabicFontSize += 0.1 * delta; wbwUrduFontSize += 0.1 * delta;
			document.querySelectorAll('.verse strong').forEach(el => el.style.fontSize = arabicFontSize + 'rem');
			document.querySelectorAll('.translation').forEach(el => el.style.fontSize = urduFontSize + 'rem');
			document.querySelectorAll('.wbw span div:first-child').forEach(el => el.style.fontSize = wbwArabicFontSize + 'rem');
			document.querySelectorAll('.wbw span div:last-child').forEach(el => el.style.fontSize = wbwUrduFontSize + 'rem');
		}
		function changeArabicFont(font) {
			arabicFont = font; document.documentElement.style.setProperty('--arabic-font', font);
			document.querySelectorAll('.verse strong, .wbw span div:first-child, .bismillah').forEach(el => el.style.fontFamily = font);
		}

		function loadSurahList() {
			surahList.innerHTML = ''; surahSelect.innerHTML = '<option value="">Select Surah</option>';
			Object.keys(quranData).forEach(num => {
				const item = document.createElement('div');
				item.className = 'surah-item';
				item.innerHTML = `<strong>${num}</strong> - Verses: ${Object.keys(quranData[num]).length}`;
				item.onclick = () => loadSurah(num);
				surahList.appendChild(item);

				const opt = document.createElement('option');
				opt.value = num; opt.textContent = `${num}`;
				surahSelect.appendChild(opt);
			});
		}

		function loadSurah(number, scrollToVerse = null) {
			surahContent.innerHTML = "<p>Loading Surah...</p>";
			const surah = quranData[number];
			if (!surah) { surahContent.innerHTML = "<p>Not found.</p>"; return; }

			verseSelect.innerHTML = '<option value="">Select Verse</option>';
			Object.keys(surah).forEach(v => {
				const opt = document.createElement('option');
				opt.value = v; opt.textContent = `Verse ${v}`;
				verseSelect.appendChild(opt);
			});

			let versesHtml = "";
			Object.keys(surah).forEach(v => {
				const ayah = surah[v];
				const wbwAyah = wbwData?.[number]?.[v] || [];
				versesHtml += `
					<div class='verse' id="verse-${v}">
						<strong style="font-size:${arabicFontSize}rem; font-family:${arabicFont}">${ayah.arabic}</strong>
						<div class='translation' style="font-size:${urduFontSize}rem">${ayah.urdu}</div>
						${ayah.hashiyah ? `<div class="hashiyah">${ayah.hashiyah}</div>` : ""}
						${wbwAyah.length ? `<div class="wbw">
							${wbwAyah.map(word => `
								<span>
									<div style="font-family:${arabicFont}; font-size:${wbwArabicFontSize}rem;">${word.arabic}</div>
									<div style="font-family:'Noto Nastaliq Urdu', serif; font-size:${wbwUrduFontSize}rem;">${word.urdu}</div>
								</span>`).join('')}
						</div>` : ""}
					</div>
				`;
			});

			surahContent.innerHTML = `<h2>Surah ${number}</h2><div>${versesHtml}</div>`;
			changeArabicFont(arabicFont);
			if (scrollToVerse) document.getElementById(`verse-${scrollToVerse}`)?.scrollIntoView({ behavior: 'smooth' });
			localStorage.setItem('lastRead', JSON.stringify({ surah: number, verse: scrollToVerse || 1 }));
		}

		surahSelect.addEventListener('change', () => { if (surahSelect.value) loadSurah(surahSelect.value, 1); });
		verseSelect.addEventListener('change', () => { if (surahSelect.value) loadSurah(surahSelect.value, verseSelect.value); });

		loadSurahList();
		const last = JSON.parse(localStorage.getItem('lastRead'));
		if (last) loadSurah(last.surah, last.verse);
	</script>
</body>
</html>
